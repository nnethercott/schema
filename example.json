[
  {
    "id": 0,
    "edges": [
      {
        "sink": 1,
        "attrs": {
          "kind": "if-else"
        }
      }
    ],
    "attrs": {
      "end_col": 8,
      "end_row": 7,
      "name": "foo",
      "start_col": 0,
      "src": "def foo():\n    if True:\n        pass\n    elif 1==2:\n        pass\n    else:\n        foo()\n    pass",
      "start_row": 0,
      "filename": "./assets/test.py",
      "type": "function_definition"
    }
  },
  {
    "id": 1,
    "edges": [
      {
        "sink": 0,
        "attrs": {
          "kind": "_parent"
        }
      },
      {
        "sink": 2,
        "attrs": {
          "kind": "branch"
        }
      },
      {
        "sink": 3,
        "attrs": {
          "kind": "branch"
        }
      },
      {
        "sink": 4,
        "attrs": {
          "kind": "branch"
        }
      }
    ],
    "attrs": {
      "end_row": 6,
      "end_col": 13,
      "kind": "if_statement",
      "src": "if True:\n        pass\n    elif 1==2:\n        pass\n    else:\n        foo()",
      "start_col": 4,
      "start_row": 1,
      "type": "if_statement"
    }
  },
  {
    "id": 2,
    "edges": [
      {
        "sink": 1,
        "attrs": {
          "kind": "_parent"
        }
      }
    ],
    "attrs": {
      "start_col": 8,
      "end_row": 2,
      "end_col": 12,
      "src": "pass",
      "condition": "True",
      "start_row": 2,
      "type": "block",
      "which": "if"
    }
  },
  {
    "id": 3,
    "edges": [
      {
        "sink": 1,
        "attrs": {
          "kind": "_parent"
        }
      }
    ],
    "attrs": {
      "end_row": 4,
      "condition": "1==2",
      "end_col": 12,
      "src": "pass",
      "start_row": 4,
      "type": "block",
      "which": "elif",
      "start_col": 8
    }
  },
  {
    "id": 4,
    "edges": [
      {
        "sink": 1,
        "attrs": {
          "kind": "_parent"
        }
      }
    ],
    "attrs": {
      "src": "foo()",
      "type": "block",
      "end_col": 13,
      "which": "else",
      "start_row": 6,
      "end_row": 6,
      "start_col": 8
    }
  }
]
[
  {
    "id": 5,
    "edges": [
      {
        "sink": 6,
        "attrs": {
          "kind": "method"
        }
      }
    ],
    "attrs": {
      "name": "FailingToolCallWorkflow",
      "decorator": "workflows.workflow.define",
      "end_row": 38,
      "filename": "./assets/test.py",
      "type": "class_definition",
      "start_col": 0,
      "end_col": 13,
      "src": "class FailingToolCallWorkflow:\n    @workflows.workflow.entrypoint\n    async def entrypoint(self) -> None:\n        session = await workflows_mistralai.RemoteSession()\n\n        class WebSearchParams(BaseModel):\n            query: str\n\n        class WebSearchResult(BaseModel):\n            result: str\n\n        @workflows.activity(retry_policy_max_attempts=1)\n        async def do_web_search(params: WebSearchParams) -> WebSearchResult:\n            raise ValueError(\"This is a test error\")\n\n        agent = workflows_mistralai.Agent(\n            model=\"mistral-medium-latest\",\n            description=\"Agent with web search tool\",\n            instructions=\"Follow the user instructions\",\n            name=\"web-search-agent\",\n            tools=[do_web_search],\n        )\n        logger.info(\"Workflow: Running agent\")\n        with contextlib.suppress(Exception) as nate:\n            await workflows_mistralai.Runner.run(\n                agent=agent,\n                inputs=\"Call do_web_search tool with query 'What is the weather today?'\",\n                session=session,\n            )",
      "start_row": 10
    }
  },
  {
    "id": 6,
    "edges": [
      {
        "sink": 5,
        "attrs": {
          "kind": "_parent"
        }
      },
      {
        "sink": 7,
        "attrs": {
          "kind": "call"
        }
      },
      {
        "sink": 10,
        "attrs": {
          "kind": "call"
        }
      },
      {
        "sink": 11,
        "attrs": {
          "kind": "call"
        }
      },
      {
        "sink": 12,
        "attrs": {
          "kind": "call"
        }
      }
    ],
    "attrs": {
      "decorator": "workflows.workflow.entrypoint",
      "type": "function_definition",
      "name": "entrypoint",
      "params": "(self)",
      "end_row": 38,
      "end_col": 13,
      "start_col": 4,
      "start_row": 12,
      "returns": "None",
      "src": "async def entrypoint(self) -> None:\n        session = await workflows_mistralai.RemoteSession()\n\n        class WebSearchParams(BaseModel):\n            query: str\n\n        class WebSearchResult(BaseModel):\n            result: str\n\n        @workflows.activity(retry_policy_max_attempts=1)\n        async def do_web_search(params: WebSearchParams) -> WebSearchResult:\n            raise ValueError(\"This is a test error\")\n\n        agent = workflows_mistralai.Agent(\n            model=\"mistral-medium-latest\",\n            description=\"Agent with web search tool\",\n            instructions=\"Follow the user instructions\",\n            name=\"web-search-agent\",\n            tools=[do_web_search],\n        )\n        logger.info(\"Workflow: Running agent\")\n        with contextlib.suppress(Exception) as nate:\n            await workflows_mistralai.Runner.run(\n                agent=agent,\n                inputs=\"Call do_web_search tool with query 'What is the weather today?'\",\n                session=session,\n            )"
    }
  },
  {
    "id": 7,
    "edges": [
      {
        "sink": 6,
        "attrs": {
          "kind": "_parent"
        }
      }
    ],
    "attrs": {
      "name": "workflows_mistralai.RemoteSession",
      "end_row": 13,
      "start_col": 24,
      "start_row": 13,
      "end_col": 59,
      "type": "call",
      "src": "workflows_mistralai.RemoteSession()"
    }
  },
  {
    "id": 8,
    "edges": [],
    "attrs": {
      "end_col": 22,
      "type": "class_definition",
      "filename": "./assets/test.py",
      "start_col": 8,
      "name": "WebSearchParams",
      "src": "class WebSearchParams(BaseModel):\n            query: str",
      "end_row": 16,
      "start_row": 15
    }
  },
  {
    "id": 9,
    "edges": [],
    "attrs": {
      "filename": "./assets/test.py",
      "end_row": 19,
      "src": "class WebSearchResult(BaseModel):\n            result: str",
      "end_col": 23,
      "start_col": 8,
      "start_row": 18,
      "type": "class_definition",
      "name": "WebSearchResult"
    }
  },
  {
    "id": 10,
    "edges": [
      {
        "sink": 6,
        "attrs": {
          "kind": "_parent"
        }
      }
    ],
    "attrs": {
      "type": "call",
      "end_row": 31,
      "name": "workflows_mistralai.Agent",
      "src": "workflows_mistralai.Agent(\n            model=\"mistral-medium-latest\",\n            description=\"Agent with web search tool\",\n            instructions=\"Follow the user instructions\",\n            name=\"web-search-agent\",\n            tools=[do_web_search],\n        )",
      "end_col": 9,
      "start_col": 16,
      "start_row": 25
    }
  },
  {
    "id": 11,
    "edges": [
      {
        "sink": 6,
        "attrs": {
          "kind": "_parent"
        }
      }
    ],
    "attrs": {
      "end_row": 32,
      "name": "logger.info",
      "src": "logger.info(\"Workflow: Running agent\")",
      "end_col": 46,
      "start_col": 8,
      "type": "call",
      "start_row": 32
    }
  },
  {
    "id": 12,
    "edges": [
      {
        "sink": 6,
        "attrs": {
          "kind": "_parent"
        }
      }
    ],
    "attrs": {
      "start_col": 18,
      "name": "workflows_mistralai.Runner.run",
      "end_col": 13,
      "end_row": 38,
      "type": "call",
      "src": "workflows_mistralai.Runner.run(\n                agent=agent,\n                inputs=\"Call do_web_search tool with query 'What is the weather today?'\",\n                session=session,\n            )",
      "start_row": 34
    }
  }
]
